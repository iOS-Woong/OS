# CPU스케줄링 개요(keyword: CPU 스케줄링, 우선순위, 스케줄링 큐, 준비큐, 대기 큐, 선점형 스케줄링, 비선점형 스케줄링)

## 들어가기 앞서..
- 모든 프로세스들은 CPU를 필요로하고, 모든 프로세스는 먼저 CPU를 사용하고 싶어함.
- 운영체제는 공정하고 합리적으로 CPU 자원을 배분하는 것을 CPU 스케줄링이라고 함.
- CPU스케줄링은 컴퓨터 성능과도 직결되는 매우 중요한 문제임.
- 만약, 스케줄링이 잘못되었다면 실행되어야 할 프로세스들이 실행되지 못하거나, 당장 급하지 않은 프로세스들만 주로 실행되는 등 무질서한 상태가 야기됨

### 프로세스 우선순위
- `입출력 집중 프로세스(I/O bound process)` - 입출력 집중 프로세스는 실행 상태보다는 입출력을 위한 대기 상태에 더 많이 머무르게 된다. (비디오재생, 디스크 백업 작업 등)
- `CPU 집중 프로세스(CPU bound process)` - 대기 상태보다는 실행 상태에 더 많이 머무르게 된다. (복잡한 수학 연산, 컴파일, 그래픽 처리 작업 등 CPU작업이 많은 프로세스를 말함)
1. CPU집중프로세스와 입출력집중프로세스가 동시에 CPU자원을 요구했다고 가정해보자.
2. 이 경우, 입출력집중프로세스를 가능한 한 빨리 실행시켜 입출력장치를 끊임없이 작동시키고
3. 그 다음, CPU 집중 프로세스에 집중적으로 CPU를 할당시키는 것이 더 효율적이다.
4. 입출력장치가 입출력 작업을 완료하기 전까지는 입출력집중프로세스는 어차피 대기 상태가 될 예정이기 때문에 입출력집중프로세스를 얼른 먼저 처리해버리면
5. 그 후에 다른 프로세스가 CPU를 사용할 수 있다.

<img width="934" alt="스크린샷 2023-08-08 오후 6 40 19" src="https://github.com/iOS-Woong/OS/assets/96489602/6d163846-9336-48d3-b1ee-53fcf4aba679">

### 스케줄링 큐
- PCB에 우선순위가 적혀 있다곤 하지만, CPU를 사용할 다음 프로세스를 찾기 위해선 운영체제가 일일이 모든 프로세스의 PCB를 뒤지고 있는 것은 비효율적이다.
  - why? 우선순위가 되고싶어하는 프로세스가 너무많음. 새로운게 생긴다면? 더 높은 우선순위를 메기기가 엄청 복잡해.. 이 작업을 1~2차레가 아니라 매번 검사하려하면 매우 힘들수도..
- `스케줄링큐` - 운영체제는 메모리로 적재되고 싶어하는 프로세스들 or 특정입출력장치를 사용하길 원하는 프로세스들을 모두 줄세운 것
  - `준비큐` - CPU를 이용하고 싶어하는 프로세스가 서는 줄
  - `대기큐` - 입출력장치를 이용하고 싶어하는 프로세스들이 서는 줄
- 운영체제는 PCB들이 큐에 삽입된 순서대로 FIFO방식을 기준으로 실행하되, 그 중 우선순위가 높은 프로세스를 먼저 실행하게 된다.
  (우선 순위가 낮은 프로세스가 먼저 큐에 삽입되어 줄을 섰다고 할지라도 우선순위가 높은 프로세스는 그들보다 먼저 처리될 수도 있음, 이 내용은 뒤에서 다루겠다.)
- 아래의 그림과 같이 대기 상태에 있는 프로세스가 대기큐에서 기다리다가 -> 입출력이 완료가되어 완료 인터럽트가 발생 -> 운영체제는 대기큐에서 작업이 완료된 PCB를 찾아서 PCB를 준비상태로 변경하여 대기큐에서 제거함
  (해당 PCB는 준비큐로 이동하게된다.)

![image](https://github.com/iOS-Woong/OS/assets/96489602/9c1cc547-93c7-4af0-95ef-67a2b0f9c380)

### 선점형과 비선점형 스케줄링
- `선점형 스케줄링(preemptive scheduling)` - 자원을 강제로 빼앗아 다른 프로세스에 할당할 수 있는 스케줄링 방식을 의미함. (어느 하나의 프로세스가 자원 사용을 독점할 수 없는 스케줄링 방식)
  - 어느 한 프로세스의 자원 독점을 막고 프로세스들에 골고루 자원을 배분 할 수 있다.(but, context Switching이 더 자주일어나므로 오버헤드가 발생할 수 있다는 단점을 가진다.)
- `비선점형 스케줄링(non-preemptive scheduling)` - 하나의 프로세스가 자워능ㄹ 사용하고 있다면 스 프로세스가 종료되거나 스스로 대기상태에 접어들기 전까진 다른 프로세스가 끼어들 수 업슨ㄴ 스케줄링 방식
  (하나의 프로세스가 자원 사용을 독점할 수 있는 스케줄링 방식을 말함.)

![image](https://github.com/iOS-Woong/OS/assets/96489602/b9203e75-5905-4ced-9eeb-8d59fb0d5c8d)

