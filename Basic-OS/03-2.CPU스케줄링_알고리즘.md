# CPU스케줄링 알고리즘(keyword: 선입 선처리 스케줄링, 최단 작업 스케줄링, 라운드 로빈 스케줄링, 우선순위 스케줄링, 다단계 피드백 큐 스케줄링)

## 들어가기 앞서..
- 이번 절에서 등장하는 알고리즘을 외우지마!(이해만 하고 넘어갈 수 있도록 하라)
- CPU 스케줄링 알고리즘은 매우 다양함. 운영체제 저마다 서로 다른 알고리즘을 사용함.
- 중점으로 봐야할 점은 스케줄링 알고리즘에서 사용된 '아이디어'이지, '용어'가 아님.

### 스케줄링 알고리즘의 종류
- `선입 선처리 스케줄링` - FCFS(First Come First Served Scheduling)이라고도 부른다. 이는 기본적으로 비선점형 스케줄링 방식을 채택하며, 준비 큐에 삽입된 순서대로 프로세스를 처리한다.
  - 단점: 이는 가장 공정해보이지만, 프로세스들이 기다리는 시간이 매우 길어질 수 있다는 단점을 갖는다.
  - 만약, 준비큐에 A프로세스(17ms), B프로세스(5ms)가 대기하고 있다고 가정해보자. 우리는 C프로세스(2ms)를 작업하기위해 준비큐에 삽입하면 C프로세스가 완료될 때까지 22ms나 기다려야한다. 이를 호위효과라고 함.

- `최단 작업 우선 스케줄링` - SJF(Shortest Job First Scheduling)이라고도 부른다. 위에서 발생한 호위효과를 줄이기 위해서 말그대로 가장 짧은 프로세스부터 실행한다.
  - 이는 기본적으로 비선점형 스케줄링 알고리즘으로 분류하지만, 경우에따라 선점형으로 구현되는 경우도 있다.

![image](https://github.com/iOS-Woong/OS/assets/96489602/d452c5dd-e569-40b0-8f4d-518302935948)

- `라운드 로빈 스케줄링` - 선입 선처리 스케줄링에 타임 슬라이스 + 타임 슬라이스라는 개념이 더해진 스케줄링 방식임.
  - `타임슬라이스` 각 프로세스가 CPU를 사용할 수 있는 정해진 시간을 의미함.
  - 즉, 라운드 로빈 스케줄링은 정해진 타임 슬라이스만큼의 시간 동안 돌아가며 CPU를 사용하는 선점형 스케줄링이다.
  - 프로세스들은 삽입된 순서대로 CPU를 이용하되, 정해진 시간만큼(타임슬라이스) CPU를 이용하고, 아직 프로세스가 완료되지 않으면 다시 큐의 맨뒤로 삽입됨.
  - 이 때, Context Switching이 발생하게된다.
  - 타임슬라이스가 너무 작다면? ContextSwitching이 너무 잦아서 오버헤드가 발생하겠죠?
  - 타임슬라이스가 너무 길다면? 선입선처리 스케줄링에서 발생하던 마찬가지로 호위효과가 발생하겠죠?

- `최소 잔여 시간 우선 스케줄링` - SRT(Shortest Remaining Time)이라고 함. 최단 작업 우선 스케줄링 + 라운드 로빈 스케줄링을 짬뽕한 스케줄링 방식임.
  - 프로세스들은 정해진 타임 슬라이스만큼 CPU를 사용하되(라운드로빈), CPU를 사용할 다음 프로세스로는 남아있는 작업 시간이 가장 적은 프로세스가 선택됨.

- `우선 순위 스케줄링` - 프로세스들에 우선순위를 부여, 가장 높은 우선순위를 가진 프로세스부터 실행하는 스케줄링 알고리즘.
  - 아까 말했던(최단 작업 우선, 최소 잔여 시간 우선, 최소 잔여 시간 우선) 등등은 우선순위 스케줄링의 한 종류이다. 라고 보면될 것 같음요
  - 하지만, 근본적인 문제도 갖고있는데 우선순위가 낮은 프로세스는 준비큐에 먼저 삽입되었음에도 계속 실행이 연기 될 수도있음.
  - 이를 기아현상 이라고 한다.
  - `에이징` 이를 방지하기 위한 대표적인 기법, 이는 오랫동안 대기한 프로세스의 우선 순위를 점차 높이는 방식을 말함.
  - 그니까, 최소 잔여 우선 스케줄링 + 에이징까지 적용하면 완전 좋은 스케줄링 방법이 되지않을까? ? ?
 
- `다단계 큐 스케줄링` - 우선순위의 발전된 형태. 우선순위별로 준비 큐를 여러개 사용하는 스케줄링 방식을 말한다.
  - 다단계 큐 스케줄링 하에서는 우선순위가 가장 높은 큐에 있는 프로세스들을 먼저 처리하고, 우선순위가 가장 높은 큐가 비어있으면 그 다음 우선순위 큐에 있는 프로세스를 처리함.
  - 장점: 큐를 여러개 두면 프로세스 유형별로 우선순위를 구분하여 실행하는 것이 편리해 짐.
  - 예를들어, 어떤 큐는 우선순위가 높아야하는 CPU집중 프로세스를 삽입! 어떤 큐에는 우선순위가 낮아야하는 입출력 집중 프로세스를 삽입! 어떤 큐에는 사용자와 상호작용이 잦은 프로세스를 삽입!
  - 그리고, 큐별로 타임슬라이스를 여러개 지정할 수도 있고, 큐별로 다른 스케줄링 알고리즘을 사용하게 할 수도 있음. (이게 우선순위스케줄링보다 좋을듯!)

![image](https://github.com/iOS-Woong/OS/assets/96489602/d652521a-3b41-4b0d-9a70-97a425abb55a)

- `다단계 피드백 큐 스케줄링` - 다단계 큐보다 한층 발전된 형태임. 이는 우선순위가 낮은 프로세스가 계속 연기될 여지가 있으므로, 다단계 큐 역시 기아현상이 나타나고 이를 보완하기위해서 고안된 스케줄링임
  - 차이점: 다단계 큐 스케줄링은 프로세스들이 큐 사이는 이동하지못했으나, 피드백 큐에선 프로세스의 큐간 이동이 가능하다.
  - 기본적인 동작: 새로 준비 상태가 된 프로세스가 있다면, 우선 순위가 가장 높은 우선순위 큐에 삽입되고 일정 시간(타임슬라이스)동안 실행됨.
    - 만약, 프로세스가 해당 큐에서 실행이 끝나지 않으면 다음 우선순위 큐에 삽입되어 실행됨. 또 밀리면 그다음 큐 -> 반복
    - 이렇게 되면 CPU를 오래사용하는 CPU집중프로세스들은 자연스럽게 우선순위가 낮아지겠죠? CPU를 적게 사용하는 입출력집중프로세스들은 자연스럽게 우선순위가 높은 큐에서 실행되겠죠?
    - 이렇게 흘러가는 다단계피드백큐 스케줄링에도 에이징 기법을 적용하면 기아현상까지 예방가능하다.
    - 이게 구현이 되게 복잡한데, 가장 일반적인 CPU스케줄링알고리즘 이라고 하네요..
